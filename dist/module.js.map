{"version":3,"file":"module.js","mappings":"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","sources":["webpack://spectraphilic-windrose-panel/external amd \"@emotion/css\"","webpack://spectraphilic-windrose-panel/external amd \"@grafana/data\"","webpack://spectraphilic-windrose-panel/external amd \"@grafana/ui\"","webpack://spectraphilic-windrose-panel/external amd \"d3\"","webpack://spectraphilic-windrose-panel/external amd \"react\"","webpack://spectraphilic-windrose-panel/webpack/bootstrap","webpack://spectraphilic-windrose-panel/webpack/runtime/compat get default export","webpack://spectraphilic-windrose-panel/webpack/runtime/define property getters","webpack://spectraphilic-windrose-panel/webpack/runtime/hasOwnProperty shorthand","webpack://spectraphilic-windrose-panel/webpack/runtime/make namespace object","webpack://spectraphilic-windrose-panel/./components/SimplePanel.tsx","webpack://spectraphilic-windrose-panel/./module.ts"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__89__;","module.exports = __WEBPACK_EXTERNAL_MODULE__781__;","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","module.exports = __WEBPACK_EXTERNAL_MODULE__201__;","module.exports = __WEBPACK_EXTERNAL_MODULE__959__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import React, { useEffect, useRef } from 'react';\nimport { GrafanaTheme2, PanelProps, getValueFormat } from '@grafana/data';\nimport { SimpleOptions } from 'types';\nimport { css, cx } from '@emotion/css';\nimport { useStyles2, useTheme2 } from '@grafana/ui';\nimport * as d3 from 'd3';\n\ninterface Props extends PanelProps<SimpleOptions> { }\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    wrapper: css({\n      position: \"relative\",\n    }),\n    svg: css`\n      position: absolute;\n      top: 0;\n      left: 0;\n    `,\n    zLabel: css({\n      fontSize: \"12px\",\n    }),\n    speedLabel: css({\n      fontSize: \"14px\",\n    }),\n    directionLabel: css({\n      fontSize: \"14px\",\n    }),\n    axis: css({\n      opacity: 0.7,\n    }),\n  };\n};\n\n// Helper function. Returns an array with the intervals from 'start' to 'end'\n// defined by the size of the intervals (step). Example:\n// getIntervals(0, 100, 30) => [[0, 30], [30, 60], [60, 90], [90, 120]]\nconst getIntervals = (start: number, end: number, step: number): Array<[number, number]> => {\n  const d = end - start;\n  const n = Math.ceil(d / step);\n  return Array.from({ length: n }, (_, i) => [start + i * step, start + (i + 1) * step]);\n};\n\nconst range = (start: number, end?: number, step = 1): number[] => {\n  const output = [];\n\n  if (end === undefined) {\n    end = start;\n    start = 0;\n  }\n\n  if (\n    (start < end && step <= 0) ||\n    (start > end && step >= 0)\n  ) {\n    throw new Error('Step value causes infinite loop');\n  }\n\n  if (start < end) {\n    for (let i = start; i < end; i += step) {\n      output.push(i);\n    }\n  } else {\n    for (let i = start; i > end; i += step) {\n      output.push(i);\n    }\n  }\n\n  return output;\n};\n\n\nconst getIntervalIndex = (value: number, intervals: Array<[number, number]>, max = 0): number | null => {\n  // Check value\n  if (value === null) {\n    console.log('Unexpected value is null');\n    return null;\n  }\n\n  // Empty intervals\n  if (!Array.isArray(intervals[0])) {\n    return null;\n  }\n  \n  // Below lower limit\n  if (value < intervals[0][0]) {\n    return null;\n  }\n\n  // For circular intervals, the 1st interval starts at a negative value\n  const len = intervals.length;\n  const lastInterval = intervals[len - 1];\n  if (value >= lastInterval[1]) {\n    value -= max;\n  }\n\n  // Within range\n  for (let i = 0; i < len; i++) {\n    const [low, high] = intervals[i];\n    if (value >= low && value < high) {\n      return i;\n    }\n  }\n\n  // Last interval is right-closed (except in circular intervals)\n  if (value === lastInterval[1]) {\n    return len - 1;\n  }\n\n  // Above upper limit\n  console.warn(`getIntervalIndex ${value} too big`);\n  return null;\n};\n\nexport const SimplePanel: React.FC<Props> = ({ options, data, width, height }) => {\n  const theme = useTheme2();\n  const styles = useStyles2(getStyles);\n\n  let speeds: number[];\n  let angles: number[];\n\n  if (data.series.length === 0) {\n    throw new Error(\"Minimum of 1 series required\");\n  }\n  else if (data.series.length === 1) {\n    const fields = data.series[0].fields;\n    speeds = fields.find((field, index) => field.name === \"speed\")?.values || [];\n    angles = fields.find((field, index) => field.name === \"direction\")?.values || [];\n  }\n  else {\n    const speedSeries = data.series.find((series, index) => {\n      series.fields.some(field => field.name === \"speed\")\n    }) || data.series[0]; // Default to first series if no \"speed\" field found\n\n    const directionSeries = data.series.find((series, index) => {\n      series.fields.some(field => field.name === \"direction\")\n    }) || data.series[1]; // Default to second series if no \"direction\" field found\n\n    speeds = speedSeries.fields[1].values;\n    angles = directionSeries.fields[1].values;\n  }\n\n  const speedMax = speeds.length > 0 ? Math.max(...speeds) : 0;\n  const raw = angles.map((angle, index) => [angle, speeds[index]])\n    .filter(([angle, speed]) => speed != null);\n\n  // Configuration\n  const slices = +options.slices;\n  const start = +options.start;\n  const step = (options.step === '') ? Math.ceil(speedMax / 8) : +parseInt(options.step, 10);\n  const unit = options.unit;\n\n  // Intervals\n  const angleStep = 360 / slices;\n  const angleIntervals = getIntervals(-angleStep / 2, 360 - angleStep / 2, angleStep);\n  const speedIntervals = getIntervals(start, speedMax, step);\n\n  // [angle-index][speed-index] = 0\n  const matrix = [...Array(angleIntervals.length)].map(x => Array(speedIntervals.length).fill(0));\n  // [angle-index][speed-index] = n\n  for (let i = 0; i < raw.length; i++) {\n    let j = getIntervalIndex(raw[i][0], angleIntervals, 360);\n    let k = getIntervalIndex(raw[i][1], speedIntervals);\n    if (j != null && k != null) {\n      matrix[j][k]++;\n    }\n  }\n\n  // x = direction - angle\n  // y = count     - radius\n  // z = speed     - color\n\n  // Columns\n  const zLabels = speedIntervals.map(x => x[0] + ' - ' + x[1]);\n\n  // [{angle: angle, 0: count-0, ..., n-1: count-n-1, total: count-total} ... ]\n  const renderData = [];\n  for (let i = 0; i < angleIntervals.length; i++) {\n    const row: { [key: string]: number } = {\n      angle: angleIntervals[i][0]\n    };\n    let total = 0;\n    for (let j = 0; j < speedIntervals.length; j++) {\n      let name = zLabels[j];\n      total += row[name] = matrix[i][j];\n    }\n    row['total'] = total;\n    renderData.push(row);\n  }\n  //console.debug('data=', data);\n\n  // Percent\n  if (options.scale === 'percent') {\n    const max = d3.sum(renderData, d => d.total);\n    const tmpScale = d3.scaleLinear([0, max], [0, 1]);\n    for (let i = 0; i < renderData.length; i++) {\n      for (let key in renderData[i]) {\n        if (key !== 'angle') {\n          renderData[i][key] = tmpScale(renderData[i][key]);\n        }\n      }\n    }\n  }\n\n  const margin = { top: 40, right: 80, bottom: 40, left: 40 },\n    innerRadius = 0,\n    chartWidth = width - margin.left - margin.right,\n    chartHeight = height - margin.top - margin.bottom,\n    outerRadius = Math.min(chartWidth, chartHeight) / 2;\n  const yRange = [innerRadius, outerRadius];\n\n  // X-Axis\n  const radiansRange = [0, 2 * Math.PI];\n  const getRadiansFromDegrees = d3.scaleLinear([0, 360], radiansRange);\n\n  // Y-axis\n  const yMax = d3.max(renderData, d => d.total) || 0;\n  const getRadius = d3.scaleLinear([0, yMax], yRange);\n\n  // Z-axis: map speed interval labels to colors\n  const getColor = d3.scaleOrdinal(zLabels, [\"#4242f4\", \"#42c5f4\", \"#42f4ce\", \"#42f456\",\n    \"#adf442\", \"#f4e242\", \"#f4a142\", \"#f44242\"]);\n\n  // Draw 1 arc for every speed interval in every direction\n  const arcWidth = d3.scaleBand(renderData.map(d => d.angle), radiansRange).align(0).bandwidth();\n\n  // X axis (angle)\n  const gridN = 8;\n  const gridX = range(0, 360, 360 / gridN);\n  const xScale = d3.scaleLinear([0, gridN], radiansRange); // Extend the domain slightly to match the range [0, 2Ï€]\n\n  // Draw the text label (degrees)\n  const xGridWidth = d3.scaleBand(gridX, radiansRange).align(0).bandwidth();\n  const angleOffset = -360.0 / gridX.length / 2.0;\n  const degrees2compass: { [key: number]: string } = {\n    0: 'N',\n    45: 'NE',\n    90: 'E',\n    135: 'SE',\n    180: 'S',\n    225: 'SW',\n    270: 'W',\n    315: 'NW',\n  };\n  const unitFormatter = getValueFormat(unit);\n  const radius = d3.scaleLinear([0, d3.max(gridX, d => d) || 0], yRange);\n\n  interface AxisComponentProps {\n    transform: string;\n  }\n\n  const AxisComponent: React.FC<AxisComponentProps> = ({ transform }) => {\n    const axisRef = useRef(null);\n\n    useEffect(() => {\n      if (axisRef.current) {\n        const axis = d3.axisLeft(radius).scale(radius.copy().range([-innerRadius, -(outerRadius + 10)])).ticks(0);\n        d3.select<SVGSVGElement, unknown>(axisRef.current).call(axis);\n      }\n    }, [transform]);\n\n    return <g ref={axisRef} transform={transform} className={styles.axis} />;\n  };\n\n  return (\n    <div\n      className={cx(\n        styles.wrapper,\n        css`\n          width: ${width}px;\n          height: ${height}px;\n        `\n      )}\n    >\n      <svg className={styles.svg}\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n        viewBox={`-${width / 2} -${height / 2} ${width} ${height}`}\n        width={width}\n        height={height}\n      >\n        <g>\n          {d3.stack().keys(zLabels)(renderData).map((d, i) => (\n            <g key={i} fill={getColor(d.key)} fillOpacity={options.opacity}>\n              {d.map((pathData, index) => {\n                const arcData = {\n                  innerRadius: getRadius(pathData[0]),\n                  outerRadius: getRadius(pathData[1]),\n                  startAngle: getRadiansFromDegrees(pathData.data.angle),\n                  endAngle: getRadiansFromDegrees(pathData.data.angle) + arcWidth\n                };\n                return <path\n                  key={index}\n                  d={d3.arc()\n                    .innerRadius(() => getRadius(pathData[0]))\n                    .outerRadius(() => getRadius(pathData[1]))\n                    .startAngle(() => getRadiansFromDegrees(pathData.data.angle))\n                    .endAngle(() => getRadiansFromDegrees(pathData.data.angle) + arcWidth)\n                    .padAngle(0.01)\n                    .padRadius(innerRadius)(arcData)?.toString() ?? undefined}\n                />\n              })}\n            </g>\n          ))}\n\n          {gridX.map((d, i) => (\n            <g\n              key={i}\n              textAnchor=\"middle\"\n              transform={`rotate(${(getRadiansFromDegrees(d) + xGridWidth / 2) * 180 / Math.PI - (90 - angleOffset)})translate(${outerRadius + 30},0)`}\n            >\n              <text\n                transform={`rotate(${90 - d})`}\n                fill={theme.colors.text.secondary}\n                className={styles.directionLabel}\n              >\n                {options.x_grid === 'compass' ? degrees2compass[d] ?? d : d}\n              </text>\n            </g>\n          ))}\n\n          <g className=\"axis\">\n            {d3.range(xScale.domain()[1]).map((d, i) => (\n              <g\n                key={i}\n                className=\"axis\"\n              >\n                <AxisComponent key={i}\n                  transform={`rotate(${xScale(d) * 180 / Math.PI})`}\n                />\n              </g>\n            ))}\n          </g>\n\n          <g textAnchor=\"middle\">\n            {getRadius.ticks(options.rings).slice(1).map((d, i) => (\n              <g key={i}>\n                <circle\n                  fill=\"none\"\n                  stroke={theme.colors.border.strong}\n                  strokeDasharray=\"4,4\"\n                  r={getRadius(d)}\n                />\n                <text\n                  y={-getRadius(d)}\n                  dy=\"-0.35em\"\n                  x={-10}\n                  fill={theme.colors.text.secondary}\n                  className={styles.speedLabel}\n                >\n                  {getRadius.tickFormat(5, options.scale === 'percent' ? \"%\" : \"s\")(d)}\n                </text>\n              </g>\n            ))}\n          </g>\n\n          {zLabels.slice().reverse().map((d, i) => (\n            <g\n              key={i}\n              transform={`translate(${outerRadius + 30}, ${-outerRadius + 40 + (i - zLabels.length / 2) * 20})`}\n            >\n              <rect width={18} height={18} fill={getColor(d)} />\n              <text\n                x={24}\n                y={9}\n                dy=\"0.35em\"\n                fill={theme.colors.text.primary}\n                className={styles.zLabel}\n              >\n                {`${d}${unitFormatter(i).suffix}`}\n              </text>\n            </g>\n          ))}\n        </g>\n      </svg>\n    </div>\n  );\n};\n","import { PanelPlugin } from '@grafana/data';\nimport { SimpleOptions } from './types';\nimport { SimplePanel } from './components/SimplePanel';\n\nexport const plugin = new PanelPlugin<SimpleOptions>(SimplePanel).setPanelOptions((builder) => {\n  return builder\n    .addSliderInput({\n      category: [\"Display\"],\n      path: 'opacity',\n      name: 'Opacity',\n      settings: {\n        min: 0.0,\n        max: 1.0,\n        step: 0.05,\n      },\n      defaultValue: 0.6,\n    })\n    .addNumberInput({\n      category: [\"Direction\"],\n      path: 'slices',\n      name: 'Cake slices',\n      settings: {\n        min: 1,\n        integer: true,\n      },\n      defaultValue: 32,\n    })\n    .addRadio({\n      category: [\"Direction\"],\n      path: 'x_grid',\n      name: 'Grid labels',\n      defaultValue: 'degrees',\n      settings: {\n        options: [\n          {\n            value: 'degrees',\n            label: 'Degrees',\n          },\n          {\n            value: 'compass',\n            label: 'Compass',\n          },\n        ],\n      }\n    })\n    .addSliderInput({\n      category: [\"Speed\"],\n      path: 'rings',\n      name: 'Rings',\n      settings: {\n        min: 1,\n        max: 16,\n        integer: true,\n      },\n      defaultValue: 5,\n    })\n    .addNumberInput({\n      category: ['Speed'],\n      path: 'start',\n      name: 'Start',\n      settings: {\n        'min': 0,\n      },\n      defaultValue: 0,\n    })\n    .addTextInput({\n      category: ['Speed'],\n      path: 'step',\n      name: 'Step',\n      defaultValue: '',\n    })\n    .addUnitPicker({\n      category: ['Speed'],\n      path: 'unit',\n      name: 'Unit',\n      defaultValue: 'velocityms',\n    })\n    .addRadio({\n      category: [\"Speed\"],\n      path: 'scale',\n      name: 'Scale',\n      defaultValue: 'absolute',\n      settings: {\n        options: [\n          {\n            value: 'absolute',\n            label: 'Absolute',\n          },\n          {\n            value: 'percent',\n            label: 'Percent',\n          },\n        ],\n      }\n    })\n});\n"],"names":["module","exports","__WEBPACK_EXTERNAL_MODULE__89__","__WEBPACK_EXTERNAL_MODULE__781__","__WEBPACK_EXTERNAL_MODULE__7__","__WEBPACK_EXTERNAL_MODULE__201__","__WEBPACK_EXTERNAL_MODULE__959__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","getStyles","theme","wrapper","css","position","svg","zLabel","fontSize","speedLabel","directionLabel","axis","opacity","getIntervals","start","end","step","Math","ceil","Array","from","length","_","i","getIntervalIndex","intervals","max","console","log","isArray","len","lastInterval","low","high","warn","plugin","PanelPlugin","options","data","width","height","useTheme2","styles","useStyles2","speeds","angles","series","Error","fields","find","field","index","name","values","speedSeries","some","directionSeries","speedMax","raw","map","angle","filter","speed","slices","parseInt","unit","angleStep","angleIntervals","speedIntervals","matrix","x","fill","j","k","zLabels","renderData","row","total","push","scale","d3","tmpScale","chartWidth","chartHeight","outerRadius","min","yRange","radiansRange","PI","getRadiansFromDegrees","yMax","getRadius","getColor","arcWidth","align","bandwidth","gridX","output","range","xScale","xGridWidth","angleOffset","degrees2compass","unitFormatter","getValueFormat","radius","AxisComponent","transform","axisRef","useRef","useEffect","current","copy","ticks","g","ref","className","div","cx","xmlns","xmlnsXlink","viewBox","keys","fillOpacity","pathData","arcData","innerRadius","startAngle","endAngle","path","padAngle","padRadius","toString","textAnchor","text","colors","secondary","x_grid","domain","rings","slice","circle","stroke","border","strong","strokeDasharray","y","dy","tickFormat","reverse","rect","primary","suffix","setPanelOptions","builder","addSliderInput","category","settings","defaultValue","addNumberInput","integer","addRadio","label","addTextInput","addUnitPicker"],"sourceRoot":""}